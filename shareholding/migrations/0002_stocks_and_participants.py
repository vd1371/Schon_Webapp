# Generated by Django 4.1 on 2022-08-15 00:10
from django.db import migrations

import os
import pandas as pd

from ..models import Stock
from ..models import Participant

def populate(*ags, **kwargs):

    stock_df = pd.read_csv(os.path.join('shareholding',
                                        'migrations',
                                        'ListofStocks.csv'),
                            index_col = 0,
                            dtype = str)
    for id, name in zip(stock_df['stock_id'], stock_df['stock_name']):
        Stock.objects.get_or_create(id = id, name = name)

    participant_df = pd.read_csv(os.path.join('shareholding',
                                                'migrations',
                                                'ListofParticipants.csv'),
                                dtype = str)
    for id, name in zip(participant_df['id'], participant_df['name']):
        Participant.objects.get_or_create(id = id, name = name)

class Migration(migrations.Migration):

    dependencies = [
        ('shareholding', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(populate,)
    ]
